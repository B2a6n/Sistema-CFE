<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Modificar Datos</title>
  <link rel="stylesheet" href="css/styles.css" />
</head>
<body class="registro-cliente">
  <!-- Fondo animado -->
  <div id="particles-js"></div>

  <!-- Encabezado con logo -->
  <header class="encabezado">
    <img src="img/logo.png" alt="Logo CFE" class="logo-cfe" />
  </header>

  <!-- Botón regresar -->
  <div style="position:absolute; top:90px; right:40px; z-index:2;">
    <a href="cliente-inicio.html" class="boton-volver">← Regresar a Inicio</a>
  </div>

  <!-- Panel -->
  <div class="form-container" style="background:#1e1e1e; margin-top:140px;">
    <h2>Modificar Datos del Usuario</h2>

    <form id="form-modificar" action="php/actualizar_usuario.php" method="POST">
      <label>Nuevo Correo Electrónico:</label>
      <input type="email" name="correo" id="correo" required />

      <label>Nueva Contraseña:</label>
      <input type="password" name="password" id="password" required />

      <label>Confirmar Nueva Contraseña:</label>
      <input type="password" id="confirmar" required />

      <label>Número de Teléfono:</label>
      <input type="text" name="telefono" id="telefono" required />

      <button type="submit" class="btn" style="margin-top:20px;">Guardar Cambios</button>
    </form>
  </div>

  <!-- Fondo animado -->
  <script src="https://cdn.jsdelivr.net/npm/particles.js"></script>
  <script>
    particlesJS("particles-js",{particles:{number:{value:80},color:{value:"#00ff00"},
    shape:{type:"circle"},opacity:{value:0.5},size:{value:3},
    line_linked:{enable:true,distance:150,color:"#00ff00",opacity:0.4,width:1},
    move:{enable:true,speed:2}},interactivity:{events:{onhover:{enable:true,mode:"repulse"}}},
    retina_detect:true});

    // Cargar datos actuales vía fetch
    fetch("php/consultar_datos_usuario.php")
      .then(r=>r.json())
      .then(u=>{
        if(u.error){ alert(u.error); return; }
        correo.value   = u.correo;
        telefono.value = u.telefono ?? '';
      });

    // Validar contraseñas iguales
    form-modificar.addEventListener("submit", e => {
      if(password.value !== confirmar.value){
        alert("Las contraseñas no coinciden"); e.preventDefault();
      }
    });
  </script>
</body>
</html>
